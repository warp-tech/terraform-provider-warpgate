---
page_title: "warpgate_user Resource - terraform-provider-warpgate"
subcategory: ""
description: |-
  Manages a user in WarpGate.
---

# warpgate_user (Resource)

Manages a user in WarpGate. Users represent identities that can be authenticated and authorized to access targets. Each user can have different credential policies that determine how they authenticate for different protocols.

## Example Usage

```hcl
resource "warpgate_user" "eugene" {
  username    = "eugene"
  description = "Eugene - Development Lead"

  credential_policy {
    ssh      = ["Password", "PublicKey"]
    http     = ["Password", "Totp"]
    mysql    = ["Password"]
    postgres = ["Password"]
  }
}

resource "warpgate_user" "deploy_bot" {
  username    = "deploy_bot"
  description = "Deployment automation service account"

  credential_policy {
    ssh = ["PublicKey"]
  }
}

# User with SSO authentication
resource "warpgate_user" "sso_user" {
  username    = "john.doe"
  description = "User with SSO authentication"

  credential_policy {
    http     = ["Sso"]
    ssh      = ["Sso", "PublicKey"]
    mysql    = ["Sso"]
    postgres = ["Sso"]
  }
}

# Add SSO credentials to the user
resource "warpgate_user_sso_credential" "google_sso" {
  user_id  = warpgate_user.sso_user.id
  provider = "google"
  email    = "john.doe@company.com"
}

resource "warpgate_user_sso_credential" "github_sso" {
  user_id  = warpgate_user.sso_user.id
  provider = "github"
  email    = "john.doe@company.com"
}
```

## Argument Reference

The following arguments are supported:

* `username` - (Required) The username of the user. Must be unique within the WarpGate instance.
* `description` - (Optional) A human-readable description of the user.
* `credential_policy` - (Optional) A block that defines the credential policies for this user. This block can be defined at most once.

The `credential_policy` block supports:

* `http` - (Optional) List of credential types required for HTTP access. Valid values: `Password`, `PublicKey`, `Totp`, `Sso`, `WebUserApproval`.
* `ssh` - (Optional) List of credential types required for SSH access. Valid values: `Password`, `PublicKey`, `Totp`, `Sso`, `WebUserApproval`.
* `mysql` - (Optional) List of credential types required for MySQL access. Valid values: `Password`, `PublicKey`, `Totp`, `Sso`, `WebUserApproval`.
* `postgres` - (Optional) List of credential types required for PostgreSQL access. Valid values: `Password`, `PublicKey`, `Totp`, `Sso`, `WebUserApproval`.

## Attribute Reference

In addition to all arguments above, the following attributes are exported:

* `id` - The ID of the user.

## SSO Integration

When using SSO authentication, users must have corresponding SSO credentials configured. Use the `warpgate_user_sso_credential` resource to manage SSO credentials:

```hcl
# Create user with SSO requirement
resource "warpgate_user" "sso_user" {
  username    = "alice"
  description = "Alice - SSO authenticated user"

  credential_policy {
    http = ["Sso"]
    ssh  = ["Sso", "PublicKey"]  # Allow both SSO and PublicKey for SSH
  }
}

# Add Google SSO credential
resource "warpgate_user_sso_credential" "alice_google" {
  user_id  = warpgate_user.sso_user.id
  provider = "google"
  email    = "alice@company.com"
}
```

### Supported SSO Providers

Common SSO providers include:
- `google` - Google Workspace/OAuth
- `github` - GitHub OAuth
- `okta` - Okta SAML/OIDC
- `azure` - Azure Active Directory
- Custom SAML/OIDC providers

## Import

Users can be imported using their ID:

```
$ terraform import warpgate_user.eugene 12345678-1234-1234-1234-123456789012
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `username` (String) The username of the user

### Optional

- `credential_policy` (Block List, Max: 1) The credential policy for the user (see [below for nested schema](#nestedblock--credential_policy))
- `description` (String) The description of the user

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedatt--credential_policy"></a>
### Nested Schema for `credential_policy`

Read-Only:

- `http` (List of String)
- `mysql` (List of String)
- `postgres` (List of String)
- `ssh` (List of String)

<a id="nestedatt--sso_credentials"></a>
### Nested Schema for `sso_credentials`

Read-Only:

- `email` (String) The email address associated with the SSO provider
- `id` (String) The ID of the SSO credential
- `provider` (String) The SSO provider name
